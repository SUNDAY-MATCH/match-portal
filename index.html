<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>My Godot Game Portal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="style.css">
  <!-- Google font Icon -->
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  />
</head>
<body>
  <div class="overlay">
    <img class="bg-base" src="assets/images/シャニマス_空.png" alt="">
  </div>
  <header>
    <h1>シャイニーなゲームおきば</h1>
    <p>283プロのアイドルたちが出てくるゲームを勝手に作りまくっています。</p>
    <div class="social-links">
      <a href="https://x.com/match_sunday" target="_blank" aria-label="X (旧Twitter)">
        <img
          src="https://cdn.simpleicons.org/x/000000"
          alt="X"
          class="social-icon"
        >
      </a>
      <a href="https://note.com/match_sunday" target="_blank" rel="noopener" aria-label="note">
        <img
          src="assets/images_icon/icon.svg"
          alt="note"
          class="social-icon"
        >
      </a>
    </div>
  </header>

  <main id="game-list" class="game-list">
    <!-- JSでここにカードを挿入 -->
  </main>

  <script src="https://cdn.jsdelivr.net/npm/js-yaml@4.1.0/dist/js-yaml.min.js"></script>
  <script>
    fetch('data/games.yml')
      .then(res => res.text())
      .then(text => {
        const games = jsyaml.load(text);
        console.log('Loaded games:', games);    // ←全体が配列かチェック
        const container = document.getElementById('game-list');
        games.forEach(g => {
          console.log('Game entry:', g);       // ←個別オブジェクトの中身を確認
          const card = document.createElement('div');
          card.className = 'game-card';
          card.innerHTML = `
            <a href="${g.url}" target="_blank">
              <img src="${g.thumb}" alt="${g.name} のサムネイル">
            </a>
            <div class="game-info">
              <h2>
                <a href="${g.url}" target="_blank">${g.name}</a>
              </h2>
              <p><strong>ジャンル：</strong>${g.genre || '—'}</p>
              <p><strong>プレイ時間：</strong>${g.play_time || '—'}</p>
              <p class="game-desc">${g.description}</p>
            </div>
          `;
          container.appendChild(card);
        });
      })
      .catch(err => console.error('YAML load error:', err));
  </script>
  <script>
    
    const imageSources = [
      'assets/images_background/あさひ~13.png',
      'assets/images_background/あさひ~22.png',
      'assets/images_background/あまな~34~09.png',
      'assets/images_background/あまな~38~22.png',
      'assets/images_background/あまな~41~21.png',
      'assets/images_background/あまな~42~60.png',
      'assets/images_background/かほ~36.png',
      'assets/images_background/きりこ~28.png',
      'assets/images_background/きりこ~35~07.png',
      'assets/images_background/きりこ~35~14.png',
      'assets/images_background/こいと~112~86.png',
      'assets/images_background/こいと~121~01.png',
      'assets/images_background/こいと~126~04.png',
      'assets/images_background/こいと~127~02.png',
      'assets/images_background/こいと~127~07.png',
      'assets/images_background/こいとひなな~01.png',
      'assets/images_background/こがね~121~54.png',
      'assets/images_background/こがね~132.png',
      'assets/images_background/こがね~134.png',
      'assets/images_background/こがね~135.png',
      'assets/images_background/こがね~98.jpg',
      'assets/images_background/さくや~01.jpg',
      'assets/images_background/ちゆき~54.jpg',
      'assets/images_background/ちゆき~58.jpg',
      'assets/images_background/ちゆき~88.png',
      'assets/images_background/ちよこ~31.jpg',
      'assets/images_background/ちよこ~59.jpg',
      'assets/images_background/ちよこ~60 (1).png',
      'assets/images_background/ちよこ~60 (2).png',
      'assets/images_background/ちよこ~60 (3).png',
      'assets/images_background/てんか~28~03.png',
      'assets/images_background/てんか~29~04.png',
      'assets/images_background/てんか~29~06.png',
      'assets/images_background/てんか~29~08.png',
      'assets/images_background/てんか~29~10.png',
      'assets/images_background/とおる~02.png',
      'assets/images_background/なつは~04.png',
      'assets/images_background/なつは~07~01.png',
      'assets/images_background/にちか~14.jpg',
      'assets/images_background/にちか~32.png',
      'assets/images_background/にちか~35~22.png',
      'assets/images_background/にちか~35~26.png',
      'assets/images_background/にちか~35~50.png',
      'assets/images_background/はづき~02.jpg',
      'assets/images_background/はづき~09.jpg',
      'assets/images_background/はづき~20.jpg',
      'assets/images_background/はづき~37.jpg',
      'assets/images_background/はづき~40~04.png',
      'assets/images_background/はな~01~10.png',
      'assets/images_background/はな~06~07.png',
      'assets/images_background/はな~06~08.png',
      'assets/images_background/はな~06~10.png',
      'assets/images_background/はな~06~12.png',
      'assets/images_background/はなあまな~06.png',
      'assets/images_background/はるき~19.png',
      'assets/images_background/はるき~20~05.png',
      'assets/images_background/はるき~20~08.png',
      'assets/images_background/ひおり~53~09.png',
      'assets/images_background/ひおり~55~03.png',
      'assets/images_background/ひおり~55~14.png',
      'assets/images_background/ひおり~57~05.png',
      'assets/images_background/ひなな~115.jpg',
      'assets/images_background/ひなな~123.jpg',
      'assets/images_background/ひなな~135~02.png',
      'assets/images_background/ひなな~136~01.png',
      'assets/images_background/ひなな~136~06.png',
      'assets/images_background/ひななあまなはな~00.png',
      'assets/images_background/まどか~11.png',
      'assets/images_background/まどか~13.png',
      'assets/images_background/まどか~18.png',
      'assets/images_background/まの~05.jpg',
      'assets/images_background/まの~72~02.png',
      'assets/images_background/まの~74~07.png',
      'assets/images_background/まみみ~24~01.png',
      'assets/images_background/まみみ~28.png',
      'assets/images_background/まみみ~30~01.png',
      'assets/images_background/まみみ~33.png',
      'assets/images_background/みこと~09~01.png',
      'assets/images_background/めい~01~05.png',
      'assets/images_background/めぐる~82~01.jpg',
      'assets/images_background/めぐる~83~41.png',
      'assets/images_background/りんぜ~68~41.png',
      'assets/images_background/りんぜ~68~55.png',
      'assets/images_background/りんぜ~72~07.png',
      'assets/images_background/りんぜ~78.png',
      'assets/images_background/りんぜ~80 (2).png',
      'assets/images_background/りんぜあまなはなこがねとおる.png',
      'assets/images_background/りんぜこいと.png',
      'assets/images_background/りんぜこがねちよこ.png'
    ];

    const overlay = document.querySelector('.overlay');

    const totalImages = 30;
    const minDistance = 100; // 🔸最小距離（これより近いとスキップ）
    const padding = 50;

    const placedPositions = [];

    function isFarEnough(x, y) {
      return placedPositions.every(pos => {
        const dx = pos.x - x;
        const dy = pos.y - y;
        return Math.sqrt(dx * dx + dy * dy) >= minDistance;
      });
    }

    let placedCount = 0;
    let tries = 0;
    const maxTries = 5000; // 無限ループ防止

    while (placedCount < totalImages && tries < maxTries) {
      const x = Math.random() * (window.innerWidth - 2 * padding) + padding;
      const y = Math.random() * (window.innerHeight - 2 * padding) + padding;

      if (isFarEnough(x, y)) {
        const img = document.createElement('img');
        img.src = imageSources[Math.floor(Math.random() * imageSources.length)];
        img.className = 'bg-float';

        const size = Math.floor(Math.random() * 160) + 200; // 200〜360px
        const rot = Math.random() * 60 - 30; // -30〜+30度

        img.style.width = `${size}px`;
        img.style.left = `${x}px`;
        img.style.top = `${y}px`;
        img.style.transform = `translate(-50%, -50%) rotate(${rot}deg)`;
        img.style.position = 'absolute';

        overlay.appendChild(img);
        placedPositions.push({ x, y });
        placedCount++;
      }

      tries++;
    }
  </script>
</body>
</html>
